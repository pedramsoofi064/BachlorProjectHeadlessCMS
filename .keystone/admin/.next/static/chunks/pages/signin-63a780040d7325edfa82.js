(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{8955:function(t,e,n){"use strict";n.d(e,{S:function(){return a}});var i=n(5614);const a=({children:t})=>{const{colors:e,shadow:n}=(0,i.Fg)();return(0,i.tZ)(i.M5,{css:{minWidth:"100vw",minHeight:"100vh",backgroundColor:e.backgroundMuted},rounding:"medium"},(0,i.tZ)(i.xu,{css:{background:e.background,width:600,boxShadow:n.s100},margin:"medium",padding:"xlarge",rounding:"medium"},t))}},4122:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var i=n(3028),a=n(2784),r=n(5614),s=n(5631),o=n(4944),u=n(3900),d=n(81),c=n(3501),l=n(6964),m=n(3485),g=n(8955);const h=({identityField:t,secretField:e,mutationName:n,successTypename:h,failureTypename:v})=>{var p,f;const y=d.Ps`
    mutation($identity: String!, $secret: String!) {
      authenticate: ${n}(${t}: $identity, ${e}: $secret) {
        ... on ${h} {
          item {
            id
          }
        }
        ... on ${v} {
          message
        }
      }
    }
  `,[w,Z]=(0,a.useState)("signin"),[_,b]=(0,a.useState)({identity:"",secret:""}),S=(0,a.useRef)(null);(0,a.useEffect)((()=>{var t;null===(t=S.current)||void 0===t||t.focus()}),[w]);const[k,{error:E,loading:F,data:$}]=(0,c.D)(y),q=(0,l.Mz)(),T=(0,m.tv)(),x=(0,l.gS)();return(0,a.useEffect)((()=>{"authenticated"===x.authenticatedItem.state&&T.push(T.query.from||"/")}),[x.authenticatedItem,T]),(0,r.tZ)(g.S,null,(0,r.tZ)(r.Kq,{gap:"xlarge",as:"form",onSubmit:async t=>{if(t.preventDefault(),"signin"===w){try{var e;if((null===(e=(await k({variables:{identity:_.identity,secret:_.secret}})).data.authenticate)||void 0===e?void 0:e.__typename)!==h)return}catch(n){return}q(),T.push(T.query.from||"/")}}},(0,r.tZ)(r.H1,null,"Sign In"),E&&(0,r.tZ)(u.qX,{title:"Error",tone:"negative"},E.message),(null===$||void 0===$||null===(p=$.authenticate)||void 0===p?void 0:p.__typename)===v&&(0,r.tZ)(u.qX,{title:"Error",tone:"negative"},null===$||void 0===$?void 0:$.authenticate.message),(0,r.tZ)(r.Kq,{gap:"medium"},(0,r.tZ)(r.TX,{as:"label",htmlFor:"identity"},t),(0,r.tZ)(o.oi,{id:"identity",name:"identity",value:_.identity,onChange:t=>b((0,i.Z)((0,i.Z)({},_),{},{identity:t.target.value})),placeholder:t,ref:S}),"signin"===w&&(0,r.tZ)(a.Fragment,null,(0,r.tZ)(r.TX,{as:"label",htmlFor:"password"},e),(0,r.tZ)(o.oi,{id:"password",name:"password",value:_.secret,onChange:t=>b((0,i.Z)((0,i.Z)({},_),{},{secret:t.target.value})),placeholder:e,type:"password"}))),"forgot password"===w?(0,r.tZ)(r.Kq,{gap:"medium",across:!0},(0,r.tZ)(s.zx,{type:"submit",weight:"bold",tone:"active"},"Log reset link"),(0,r.tZ)(s.zx,{weight:"none",tone:"active",onClick:()=>Z("signin")},"Go back")):(0,r.tZ)(r.Kq,{gap:"medium",across:!0},(0,r.tZ)(s.zx,{weight:"bold",tone:"active",isLoading:F||(null===$||void 0===$||null===(f=$.authenticate)||void 0===f?void 0:f.__typename)===h,type:"submit"},"Sign In"))))};var v,p=(v={identityField:"email",secretField:"password",mutationName:"authenticateUserWithPassword",successTypename:"UserAuthenticationWithPasswordSuccess",failureTypename:"UserAuthenticationWithPasswordFailure"},()=>(0,r.tZ)(h,v))},6551:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n(4122)}])}},function(t){t.O(0,[774,888,179],(function(){return e=6551,t(t.s=e);var e}));var e=t.O();_N_E=e}]);