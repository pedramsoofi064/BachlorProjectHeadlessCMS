(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3716:function(t,e,r){"use strict";r.d(e,{H:function(){return $},P:function(){return z}});var n=r(7896),o=r(5614),i=r(2784),a=r(9740),s=r(5632),l=r(5631),c=r(6361),d=r(891),g=r(5273),u=r(6964),p=r(3485),m=r(1428),h=r(9097);const f=()=>{var t;const{spacing:e}=(0,o.Fg)(),{adminConfig:r}=(0,u.jf)();return null!==(t=r.components)&&void 0!==t&&t.Logo?(0,o.tZ)(r.components.Logo,null):(0,o.tZ)(o.H3,null,(0,o.tZ)(h.default,{href:"/",passHref:!0},(0,o.tZ)("a",{css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,o.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${e.medium}px ${e.xsmall}px 0`,verticalAlign:"middle"}},(0,o.tZ)("defs",null,(0,o.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,o.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,o.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,o.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6")))},Z=["children"],b=({href:t,children:e,isSelected:r})=>{const{colors:n,palette:i,spacing:a,radii:l,typography:c}=(0,o.Fg)(),d=(0,s.useRouter)(),g=void 0!==r?r:d.pathname===t;return(0,o.tZ)("li",null,(0,o.tZ)(p.rU,{"aria-current":!!g&&"location",href:t,css:{background:"transparent",borderBottomRightRadius:l.xsmall,borderTopRightRadius:l.xsmall,color:i.neutral700,display:"block",fontWeight:c.fontWeight.medium,marginBottom:a.xsmall,marginRight:a.xlarge,padding:`${a.small}px ${a.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:n.backgroundHover,color:n.linkHoverColor},"&[aria-current=location]":{background:i.neutral200,color:i.neutral900}}},e))},v=({item:t})=>{const{apiPath:e}=(0,u.jf)(),{spacing:r,typography:i}=(0,o.Fg)();return(0,o.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:r.xlarge,marginBottom:0}},t&&"authenticated"===t.state?(0,o.tZ)("div",{css:{fontSize:i.fontSize.small}},"Signed in as ",(0,o.tZ)("strong",null,t.label)):(0,o.tZ)("div",{css:{fontSize:i.fontSize.small}},"GraphQL Playground and Docs"),(0,o.tZ)(c.J2,{placement:"bottom",triggerRenderer:({triggerProps:t})=>(0,o.tZ)(l.zx,(0,n.Z)({size:"small",style:{padding:0,width:36},"aria-label":"Links and signout"},t),(0,o.tZ)(d.x,null))},(0,o.tZ)(o.Kq,{gap:"medium",padding:"large",dividers:"between"},(0,o.tZ)(x,{target:"_blank",href:e},"API Explorer"),(0,o.tZ)(x,{target:"_blank",href:"https://github.com/keystonejs/keystone"},"GitHub Repository"),(0,o.tZ)(x,{target:"_blank",href:"https://keystonejs.com"},"Keystone Documentation"),t&&"authenticated"===t.state&&(0,o.tZ)(m.S,null))))},x=t=>{let{children:e}=t,r=(0,a.Z)(t,Z);const{typography:i}=(0,o.Fg)();return(0,o.tZ)("a",(0,n.Z)({css:{alignItems:"center",display:"flex",fontSize:i.fontSize.small,textDecoration:"none"}},r),e,(0,o.tZ)(g.X,{size:"small"}))},y=({authenticatedItem:t,children:e})=>{const{spacing:r}=(0,o.Fg)();return(0,o.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,o.tZ)(v,{item:t}),(0,o.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:r.xlarge}},(0,o.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},e)))},k=({list:t})=>{const e=(0,s.useRouter)();return(0,o.tZ)(b,{isSelected:e.pathname.split("/")[1]===`/${t.path}`.split("/")[1],href:`/${t.path}`},t.label)},C=({lists:t=[],include:e=[]})=>{const r=e.length>0?t.filter((t=>e.includes(t.key))):t;return(0,o.tZ)(i.Fragment,null,r.map((t=>(0,o.tZ)(k,{key:t.key,list:t}))))},w=()=>{var t;const{adminMeta:{lists:e},adminConfig:r,authenticatedItem:n,visibleLists:i}=(0,u.jf)();if("loading"===i.state)return null;if("error"===i.state)return(0,o.tZ)(o.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},i.error instanceof Error?i.error.message:i.error[0].message);const a=Object.keys(e).map((t=>i.lists.has(t)?e[t]:null)).filter((t=>Boolean(t)));return null!==r&&void 0!==r&&null!==(t=r.components)&&void 0!==t&&t.Navigation?(0,o.tZ)(r.components.Navigation,{authenticatedItem:n,lists:a}):(0,o.tZ)(y,{authenticatedItem:n},(0,o.tZ)(b,{href:"/"},"Dashboard"),(0,o.tZ)(C,{lists:a}))},$=80,R=t=>(0,o.tZ)(i.Fragment,null,(0,o.tZ)("style",null,"body { overflow: hidden; }"),(0,o.tZ)("div",(0,n.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${$}px auto`,height:"100vh"}},t))),S=t=>(0,o.tZ)("aside",(0,n.Z)({css:{minWidth:0,overflowY:"auto",WebkitOverflowScrolling:"touch"}},t)),j=t=>{const{colors:e,spacing:r}=(0,o.Fg)();return(0,o.tZ)("main",(0,n.Z)({css:{backgroundColor:e.background,boxSizing:"border-box",minWidth:0,paddingLeft:r.xlarge,paddingRight:r.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},t))},z=({children:t,header:e})=>{const{colors:r,spacing:n}=(0,o.Fg)();return(0,o.tZ)(R,null,(0,o.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",paddingLeft:n.xlarge,paddingRight:n.xlarge}},(0,o.tZ)(f,null)),(0,o.tZ)("header",{css:{alignItems:"center",backgroundColor:r.background,borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge}},e),(0,o.tZ)(S,null,(0,o.tZ)(w,null)),(0,o.tZ)(j,null,t))}},8899:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var n=r(7896),o=r(2784),i=r(5614),a=r(8752),s=r(2158),l=r(6759),c=r(5621),d=(r(9935),r(9378),r(5808)),g=r(3716),u=r(81),p=r(1964),m=r(6964),h=r(3485),f=r(5632);r(5364),r(4356),r(8651),r(3900),r(5631),r(6361),r(891),r(5273),r(1428),r(9097),r(3233),r(7018),r(7668),r(7532),r(2180),r(1168),r(581),r(8139);const Z=({listKey:t,count:e})=>{const{colors:r,palette:n,radii:c,spacing:g}=(0,i.Fg)(),u=(0,m.sm)(t),[p,Z]=(0,o.useState)(!1),v=(0,f.useRouter)();return(0,i.tZ)("div",{css:{position:"relative"}},(0,i.tZ)(h.rU,{href:`/${u.path}`,css:{backgroundColor:r.background,borderColor:r.border,borderRadius:c.medium,borderWidth:1,display:"inline-block",minWidth:280,padding:g.large,textDecoration:"none",":hover":{borderColor:n.blue400},":hover h3":{textDecoration:"underline"}}},(0,i.tZ)("h3",{css:{margin:`0 0 ${g.small}px 0`}},u.label," "),"success"===e.type?(0,i.tZ)("span",{css:{color:r.foreground,textDecoration:"none"}},e.count," item",1!==e.count?"s":""):"error"===e.type?e.message:"loading"===e.type?(0,i.tZ)(l.xg,{label:`Loading count of ${u.plural}`,size:"small",tone:"passive"}):"No access"),(0,i.tZ)(b,{title:`Create ${u.singular}`,disabled:p,onClick:()=>{Z(!0)}},(0,i.tZ)(a.p,{size:"large"}),(0,i.tZ)(i.TX,null,"Create ",u.singular)),(0,i.tZ)(s.tW,{isOpen:p},(0,i.tZ)(d.C,{listKey:u.key,onCreate:({id:t})=>{v.push(`/${u.path}/${t}`)},onClose:()=>{Z(!1)}})))},b=t=>{const e=(0,i.Fg)();return(0,i.tZ)("button",(0,n.Z)({css:{alignItems:"center",backgroundColor:e.palette.neutral400,border:0,borderRadius:e.radii.xsmall,color:"white",cursor:"pointer",display:"flex",height:32,justifyContent:"center",outline:0,position:"absolute",right:e.spacing.large,top:e.spacing.large,transition:"background-color 80ms linear",width:32,"&:hover, &:focus":{backgroundColor:e.tones.positive.fill[0]}}},t))},v=()=>{const{adminMeta:{lists:t},visibleLists:e}=(0,m.jf)(),r=(0,o.useMemo)((()=>u.Ps`
    query {
      keystone {
        adminMeta {
          lists {
            key
            fields {
              path
              createView {
                fieldMode
              }
            }
          }
        }
      }
      ${Object.entries(t).map((([t,e])=>`${t}: ${e.gqlNames.listQueryCountName}`)).join("\n")}
    }`),[t]);let{data:n,error:a}=(0,p.a)(r,{errorPolicy:"all"});const s=(0,c.m)(n,null===a||void 0===a?void 0:a.graphQLErrors);return(0,i.tZ)(g.P,{header:(0,i.tZ)(i.X6,{type:"h3"},"Dashboard")},"loading"===e.state?(0,i.tZ)(i.M5,{css:{height:`calc(100vh - ${g.H}px)`}},(0,i.tZ)(l.xg,{label:"Loading lists",size:"large",tone:"passive"})):(0,i.tZ)(i.gF,{as:"ul",gap:"large",paddingY:"xlarge",css:{paddingLeft:"0px",marginBottom:"0px"}},"error"===e.state?(0,i.tZ)("span",{css:{color:"red"}},e.error instanceof Error?e.error.message:e.error[0].message):Object.keys(t).map((t=>{if(!e.lists.has(t))return null;const r=s.get(t);return(0,i.tZ)(Z,{count:n?r.errors?{type:"error",message:r.errors[0].message}:{type:"success",count:n[t]}:{type:"loading"},key:t,listKey:t})}))))}},1491:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8899)}])}},function(t){t.O(0,[774,888,179],(function(){return e=1491,t(t.s=e);var e}));var e=t.O();_N_E=e}]);